<div class="print-container">
    @if (loading()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Memuat data...</p>
    </div>
    }

    @if (error()) {
    <div class="error-state">
        <h2>Error</h2>
        <p>{{ error() }}</p>
    </div>
    }

    @if (data(); as sj) {
    <div class="no-print print-button-container">
        <button (click)="print()" class="print-button">
            <i class="pi pi-print"></i> Print
        </button>
    </div>

    <div class="report-content">
        <!-- Header Section -->
        <div class="header-section">
            <div class="left-info">
                <div class="info-line">
                    <span class="spacer"></span>
                    <span>{{ formatDate(sj.tanggal) }}</span>
                </div>
                <div class="info-line">
                    <span class="spacer"></span>
                    <span>{{ sj.nomorSurat }}</span>
                </div>
                <div class="info-line">
                    <span class="spacer"></span>
                    <span>{{ sj.user }}</span>
                </div>
                <div class="info-line">
                    <span class="spacer"></span>
                    <span>{{ sj.user }} - {{ sj.timestamp }}</span>
                </div>
            </div>

            <div class="right-info">
                <div>{{ sj.customer.nama }}</div>
                <div>{{ sj.customer.alamat }}</div>
                <div>{{ sj.customer.kota }}</div>
                <div>{{ sj.customer.kode }}</div>
            </div>
        </div>

        <!-- Items Section -->
        <div class="items-section">
            @for (item of sj.items; track item.kodeBarang) {
            <div class="item-row">
                <span class="col-kode">{{ item.kodeBarang }}</span>
                <span class="col-nama">{{ item.namaBarang }}</span>
                <span class="col-jumlah">{{ formatNumber(item.jumlah) }}</span>
                <span class="col-panjang">{{ formatNumber(item.panjang) }}</span>
                <span class="col-total">{{ formatNumber(item.jumlah * item.panjang) }}</span>
                <span class="col-keterangan">{{ item.status }} {{ item.urutan }}</span>
            </div>
            }
        </div>

        <!-- Footer Section -->
        <div class="footer-section">
            <div class="tujuan-info">
                Tb {{ sj.customer.nama }} - {{ sj.tujuan }}
            </div>
            <div class="sales-info">
                Sales : {{ sj.sales }}
            </div>
        </div>
    </div>
    }
</div>